package Pass;

import java.io.FileWriter;
import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Paths;
import java.util.ArrayList;

public class Pass1 {

	
	public static void main(String[] args) throws Exception {
		// TODO Auto-generated method stub

		
		String data = readFileAsString("/home/ccoew/3476/Assgn1/src/Files/one.txt");
		String[] s = data.split("\\W");
		 
		 ArrayList<String> str = new ArrayList<String>();
		 for(String e : s){
		    if(!e.isEmpty()){    
			 str.add(e);
			 
		    }
		    
		 }
		 System.out.print(str.toString());

		 int counter = 3;
		 	
		 for(String w :str) {
			
			 if(w.matches("\\d*")||w.matches("\\D")||w.matches(".REG+")&&counter!=3)
			 { 
				 //separate operands
				 
				 System.out.print(w+" ");

				 if(counter==1){
					 System.out.print(counter+" ");
				     counter=3;	
				     write("/home/ccoew/3476/Assgn1/src/Files/op2.text",w+"\n");
				     	   
				 }

				 if(counter==2){

				     write("/home/ccoew/3476/Assgn1/src/Files/op1.text",w+"\n");
				     	   
					 System.out.print(counter+" ");
				     counter--;				 
				 }

				 
			 }
			 else {
		 		 
		       //else it is instruction
				 System.out.print(w+"\n");
			     

			     write("/home/ccoew/3476/Assgn1/src/Files/instr.text",w+"\n");
			     	   
				 if(counter==1){
					 
					 
					 System.out.print(counter+" ");
				     counter=2;				 
				 }

				 else if(counter==3){
					 System.out.println(counter+" ");
				     counter--;				 
				 }
			 }
			 
			 }

		}


	
	public static String readFileAsString(String fileName)throws Exception
	{
	 String data = "";
	 data = new String(Files.readAllBytes(Paths.get(fileName)));
	 return data;
	}
	
	public static void write(String path,String update){
		try {
			FileWriter file = new FileWriter(path,true);
			file.write(update);
			file.close();
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}

	}

}
